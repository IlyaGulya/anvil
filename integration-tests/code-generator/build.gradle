apply plugin: 'org.jetbrains.kotlin.jvm'
apply plugin: 'org.jetbrains.kotlin.kapt'

dependencies {
  api project(':compiler-api')
  implementation project(':compiler-utils')

  compileOnly deps.auto.service.annotations
  kapt deps.auto.service.processor

  testImplementation testFixtures(project(":compiler-utils"))
  testImplementation deps.junit
  testImplementation deps.truth
}

if (rootProject.ext.kotlinPreview) {
  //noinspection UnnecessaryQualifiedReference
  tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).configureEach {
    compilerOptions {
      freeCompilerArgs.add("-opt-in=org.jetbrains.kotlin.compiler.plugin.ExperimentalCompilerApi")
    }
  }
}
